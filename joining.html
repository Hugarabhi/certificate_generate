<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codenprofit | Joining Certificate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600;700&family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,700;1,700&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold-primary: #856404;
            --slate-dark: #0f172a;
            --luxury-blue: #f4f9ff;
            --paper-white: #ffffff;
        }

        body {
            background: #cbd5e1;
            font-family: 'Montserrat', sans-serif;
            padding: 40px 20px;
        }

        .a4-container {
            width: 210mm;
            height: 297mm;
            background: linear-gradient(135deg, #ffffff 0%, #f0f7ff 100%);
            margin: 0 auto;
            position: relative;
            box-shadow: 0 0 60px rgba(0,0,0,0.15);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .border-outer { position: absolute; inset: 10mm; border: 1px solid rgba(148, 163, 184, 0.2); z-index: 1; }
        .border-accent { position: absolute; inset: 12mm; border-left: 5px solid var(--gold-primary); z-index: 1; }
        
        .bg-symbols {
            position: absolute;
            inset: 0;
            opacity: 0.04;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .bg-watermark-text {
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-25deg);
            font-size: 140px;
            font-weight: 900;
            color: rgba(15, 23, 42, 0.4);
            white-space: nowrap;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .content {
            position: relative;
            z-index: 10;
            padding: 30mm 20mm;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .serif-title { font-family: 'Playfair Display', serif; }
        .signature-font { font-family: 'Dancing Script', cursive; }

        @media print { .no-print { display: none !important; } }
        
        .btn-action {
            background: var(--slate-dark);
            transition: all 0.2s;
        }
        .btn-action:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        
        .logo-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f1f5f9;
            border: 1px dashed #cbd5e1;
            color: #94a3b8;
            font-weight: bold;
            font-size: 10px;
            border-radius: 4px;
        }
    </style>
</head>
<body>

    <!-- Setup Panel -->
    <div class="max-w-4xl mx-auto mb-10 bg-white/90 backdrop-blur-md p-8 rounded-3xl shadow-xl no-print border border-white/20">
        <h2 class="text-xl font-bold mb-6 text-slate-800 flex items-center gap-2">
            <span class="w-8 h-8 bg-amber-100 text-amber-700 rounded-full flex items-center justify-center text-sm">1</span>
            Onboarding Configuration
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div class="space-y-1">
                <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Employee Full Name</label>
                <input type="text" id="inputName" value="Alexandra Sterling" 
                       class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 outline-none transition-all">
            </div>
            <div class="space-y-1">
                <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Joining Role</label>
                <select id="inputRole" class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 outline-none">
                    <option value="Web Developer">Web Developer</option>
                    <option value="Full Stack Developer">Full Stack Developer</option>
                    <option value="Frontend Developer">Frontend Developer</option>
                    <option value="Backend Developer">Backend Developer</option>
                    <option value="Market Manager">Market Manager</option>
                    <option value="Business Handler">Business Handler</option>
                    <option value="Marketing Lead">Marketing Lead</option>
                    <option value="Meeting Handler">Meeting Handler</option>
                    <option value="Tech Master">Tech Master</option>
                    <option value="Update Manager">Update Manager</option>
                    <option value="Quality Head">Quality Head</option>
                </select>
            </div>
            <div class="space-y-1">
                <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Effective Date</label>
                <input type="date" id="inputDate" value="2026-03-01" 
                       class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 outline-none">
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t border-slate-100">
            <div class="space-y-1">
                <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Manual Ref Number</label>
                <input type="text" id="inputRef" placeholder="e.g. 8842" 
                       class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 outline-none">
            </div>
            <div class="space-y-1">
                <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Authenticity Hash / Fingerprint</label>
                <input type="text" id="inputHash" placeholder="e.g. 8F2A-9B01-4432-EE21" 
                       class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 outline-none">
            </div>
        </div>

        <div class="mt-8 flex justify-end">
            <button onclick="generatePDF()" id="downloadBtn" class="btn-action text-white px-10 py-4 rounded-2xl font-bold shadow-lg flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                Generate & Download
            </button>
        </div>
    </div>

    <!-- Joining Certificate Canvas -->
    <div id="certificate" class="a4-container">
        <div class="bg-symbols">
            <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                <g transform="translate(650, 100) scale(2)" fill="none" stroke="currentColor" stroke-width="1">
                    <polyline points="0,30 15,10 30,20 45,0" />
                    <line x1="0" y1="30" x2="50" y2="30" />
                    <line x1="0" y1="0" x2="0" y2="30" />
                </g>
                <g transform="translate(100, 950) scale(3)" fill="none" stroke="currentColor" stroke-width="1">
                    <path d="M10,0 L0,10 L10,20 M25,0 L35,10 L25,20 M20,2 L15,18" />
                </g>
                <g transform="translate(680, 500) scale(2.5)" fill="none" stroke="currentColor" stroke-width="1">
                    <path d="M0 5 Q 15 0 30 5 V 35 Q 15 30 0 35 Z" />
                    <path d="M30 5 Q 45 0 60 5 V 35 Q 45 30 30 35" />
                </g>
                <text x="50" y="200" font-family="monospace" font-size="20">10110</text>
                <text x="700" y="800" font-family="monospace" font-size="24">0x4F</text>
                <text x="120" y="450" font-family="monospace" font-size="18">88%</text>
                <text x="400" y="50" font-family="monospace" font-size="16">Î£=âˆž</text>
            </svg>
        </div>
        <div class="bg-watermark-text">CODENPROFIT</div>
        <div class="border-outer"></div>
        <div class="border-accent"></div>

        <div class="content">
            <!-- Header Section -->
            <div class="flex justify-between items-start mb-16">
                <div class="z-20">
                    <div id="msmeLogoContainer" class="h-14 flex items-center">
                        <!-- Path changed to MSME.jpg -->
                        <img src="MSME.jpg" 
                             class="h-full object-contain" 
                             alt="MSME Logo" 
                             onerror="this.style.display='none'; document.getElementById('msmeFallback').style.display='flex';">
                        <div id="msmeFallback" class="logo-placeholder h-12 w-28 hidden">MSME Logo Missing</div>
                    </div>
                    <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-none mt-4">MSME Registered Enterprise</div>
                    <div class="text-[10px] font-bold text-slate-800 mt-1 uppercase">UDYAM-MH-26-1092764</div>
                </div>
                
                <div class="text-right z-20">
                    <div class="flex items-center justify-end gap-3 mb-2">
                        <div class="text-right">
                            <div class="text-xl font-black tracking-tighter text-slate-900 leading-none">CODENPROFIT</div>
                            <div class="text-[9px] font-bold text-amber-600 uppercase tracking-widest">Technologies</div>
                        </div>
                        <!-- Company Logo Integration -->
                        <div class="w-14 h-14 bg-white rounded-xl shadow-md flex items-center justify-center p-1 overflow-hidden border border-slate-100">
                            <img src="codenprofit.jpeg" 
                                 class="w-full h-full object-cover rounded-lg" 
                                 alt="CP Logo"
                                 onerror="this.style.display='none'; this.parentElement.innerHTML='<span class=\'font-bold text-slate-900\'>CP</span>'">
                        </div>
                    </div>
                    <div class="text-[9px] text-slate-400 font-medium italic">Ref: CP/ONB/2026/<span id="refNum">8842</span></div>
                </div>
            </div>

            <!-- Body Section -->
            <div class="flex-1">
                <div class="mb-12">
                    <h1 class="serif-title text-5xl font-bold text-slate-900 mb-2">Joining Certificate</h1>
                    <div class="h-1 w-24 bg-amber-500"></div>
                </div>

                <div class="text-slate-700 space-y-6 text-sm leading-relaxed text-justify">
                    <p>This document serves as a formal <strong>Certificate of Joining</strong> and appointment for the professional deployment at Codenprofit Technologies.</p>
                    <p>It is with great pleasure that we officially welcome:</p>
                    
                    <div class="py-6 border-y border-slate-100/50 my-4">
                        <h2 id="displayName" class="serif-title text-4xl font-bold text-slate-800 tracking-tight uppercase">Alexandra Sterling</h2>
                        <div class="mt-2 text-amber-700 font-bold uppercase tracking-[0.2em] text-[10px]">Appointed as: <span id="displayRole" class="text-slate-900 font-black">Tech Master</span></div>
                    </div>

                    <p>Effective from <span id="displayDate" class="font-bold text-slate-900">March 01, 2026</span>, the appointee is integrated into our elite network of innovators. This appointment is made based on demonstrated technical proficiency and alignment with our mission of digital dominance.</p>

                    <div>
                        <div class="text-[11px] font-bold text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2">
                            <span class="w-1.5 h-1.5 bg-amber-500 rounded-full"></span>
                            Core Responsibilities & Strategic Mandate
                        </div>
                        <div id="displayDetails" class="bg-white/50 backdrop-blur-sm p-6 rounded-2xl border border-slate-200/50 italic text-slate-600 leading-relaxed shadow-sm">
                            The Elite Engineer. Solves complex technical challenges. Ensures system stability and superiority.
                        </div>
                    </div>
                    <p>The appointee is expected to uphold the rigorous standards of operational excellence and professional ethics mandated by the Codenprofit Global Registry.</p>
                </div>
            </div>

            <!-- Footer Section -->
            <div class="grid grid-cols-2 pt-12 items-end">
                <div>
                    <div class="signature-font text-3xl text-slate-800 mb-1">Avinash Hugar</div>
                    <div class="h-px bg-slate-300 w-48 mb-2"></div>
                    <div class="text-[9px] font-bold uppercase tracking-widest text-slate-400">Founder & CEO, Codenprofit</div>
                </div>
                <div class="text-right">
                    <div class="inline-block p-4 border-2 border-slate-200 rounded-2xl text-center bg-white/50">
                        <div class="text-[8px] font-black text-slate-400 uppercase mb-1">Authenticity Hash</div>
                        <div id="fingerprint" class="font-mono text-[9px] text-slate-600">8F2A-9B01-4432-EE21</div>
                    </div>
                </div>
            </div>

            <div class="mt-16 text-center">
                <div class="text-[8px] text-slate-300 uppercase tracking-[0.4em]">Codenprofit Technologies â€¢ Udyam: MH-26-1092764 â€¢ Verified Onboarding</div>
            </div>
        </div>
    </div>

    <div id="toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-8 py-3 rounded-full shadow-2xl opacity-0 transition-all duration-300 text-sm font-bold z-50"></div>

    <script>
        const roleData = {
            "Web Developer": "Expert in crafting responsive, high-performance web solutions. Leverages cutting-edge technologies to ensure seamless user experiences.",
            "Full Stack Developer": "Versatile architect of both frontend and backend systems. Bridges logic and design to build complete, scalable digital ecosystems.",
            "Frontend Developer": "The visual specialist. Crafts immersive user interfaces with precision, ensuring performance, accessibility, and aesthetic dominance.",
            "Backend Developer": "The engine architect. Builds robust server-side logic, optimizes database structures, and ensures secure, lightning-fast data flow.",
            "Market Manager": "Strategic growth leader. Analyzes market trends, identifies opportunities, and executes high-impact campaigns to drive reach.",
            "Business Handler": "ðŸ¤ The Strategic Connector. Secures high-value clients. Builds powerful partnerships. Drives premium growth.",
            "Marketing Lead": "ðŸ“¢ The Brand Authority. Positions Codenprofit as elite. Creates visibility and digital dominance.",
            "Meeting Handler": "ðŸ”— The Alignment Specialist. Connects clients and creators with precision. Eliminates confusion.",
            "Tech Master": "ðŸ’» The Elite Engineer. Solves complex technical challenges. Ensures system stability and superiority.",
            "Update Manager": "ðŸ›¡ The Growth Guardian. Maintains websites. Handles security, performance, and monthly optimization.",
            "Quality Head": "âš– The Standard Enforcer. Evaluates performance. Rewards excellence. Protects company reputation."
        };

        const inputs = ['inputName', 'inputRole', 'inputDate', 'inputRef', 'inputHash'];

        function update() {
            document.getElementById('displayName').innerText = document.getElementById('inputName').value || "Alexandra Sterling";
            const role = document.getElementById('inputRole').value;
            document.getElementById('displayRole').innerText = role;
            document.getElementById('displayDetails').innerText = roleData[role];
            
            const dateInput = document.getElementById('inputDate').value;
            if(dateInput) {
                const date = new Date(dateInput);
                document.getElementById('displayDate').innerText = date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            }

            document.getElementById('refNum').innerText = document.getElementById('inputRef').value || "8842";
            document.getElementById('fingerprint').innerText = document.getElementById('inputHash').value || "FINGERPRINT-PENDING";
        }

        inputs.forEach(id => document.getElementById(id).addEventListener('input', update));
        document.getElementById('inputRole').addEventListener('change', update);

        // Initialization
        const randomRef = Math.floor(1000 + Math.random() * 9000);
        const randomHash = Array.from({length: 4}, () => Math.random().toString(36).substr(2, 4).toUpperCase()).join('-');
        
        document.getElementById('inputRef').value = randomRef;
        document.getElementById('inputHash').value = randomHash;
        
        update();

        async function generatePDF() {
            const btn = document.getElementById('downloadBtn');
            const original = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = `<span class='animate-pulse'>Processing Assets...</span>`;

            const element = document.getElementById('certificate');
            
            try {
                // html2canvas requires useCORS for external but allowTaint for some local setups
                const canvas = await html2canvas(element, {
                    scale: 3,
                    useCORS: true, 
                    allowTaint: true,
                    backgroundColor: '#FFFFFF',
                    width: 210 * 3.7795,
                    height: 297 * 3.7795,
                    logging: false,
                    onclone: (clonedDoc) => {
                        // Ensure images are visible in the clone used for capture
                        const images = clonedDoc.getElementsByTagName('img');
                        for(let img of images) {
                            img.style.display = 'block';
                        }
                    }
                });

                const imgData = canvas.toDataURL('image/jpeg', 0.98);
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
                pdf.addImage(imgData, 'JPEG', 0, 0, 210, 297);
                pdf.save(`Joining_Letter_${document.getElementById('inputName').value.replace(/\s+/g, '_')}.pdf`);
                showToast("Download Successful! âœ¨");
            } catch (err) {
                console.error("PDF Generation Error:", err);
                showToast("Error generating PDF âš ï¸ Check console.");
            } finally {
                btn.disabled = false;
                btn.innerHTML = original;
            }
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.style.opacity = "1";
            setTimeout(() => t.style.opacity = "0", 3000);
        }
    </script>
</body>
</html>
